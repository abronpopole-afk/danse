 Le bot capture lâ€™Ã©cran
Et lÃ , on voit un truc trÃ¨s important :
PNG IHDR: 2560x1600


ğŸ‘‰ La capture dâ€™Ã©cran nâ€™est PAS la table.
ğŸ‘‰ Câ€™est tout lâ€™Ã©cran (2560Ã—1600), pas la fenÃªtre GGClub.
Donc :
- Le bot croit capturer la table
- Mais il capture lâ€™Ã©cran entier
- Puis il applique des zones OCR prÃ©-calculÃ©es pour 566Ã—420
- Sur une image de 2560Ã—1600
â¡ï¸ Toutes les zones OCR tombent dans le vide.
â¡ï¸ Le bot ne dÃ©tecte rien.
â¡ï¸ Le pipeline OCR tourne dans le vide.

âœ” Le bot lance lâ€™OCR
Initialisation du pipeline OCR...
extractTableState...


Mais aucun rÃ©sultat OCR nâ€™apparaÃ®t :
- pas de cartes dÃ©tectÃ©es
- pas de boutons dÃ©tectÃ©s
- pas de pot
- pas de stacks
- pas de joueur actif
â¡ï¸ Lâ€™OCR tourne mais ne renvoie rien.

âœ” Le bot boucle en analyse
Il refait :
- capture
- decode PNG
- OCR
- analyse
- rien dÃ©tectÃ©
- recommence
â¡ï¸ Il tourne en boucle sans jamais trouver un Ã©tat valide.

ğŸ”¥ 2. Pourquoi lâ€™app CRASH ?
Voici la cause exacte, sans dÃ©tour :
âŒ Le bot capture lâ€™Ã©cran entier au lieu de capturer la fenÃªtre GGClub.
Et ensuite :
âŒ Il applique des zones OCR scalÃ©es pour 566Ã—420 sur une image 2560Ã—1600.
RÃ©sultat :
- les buffers explosent
- les allocations mÃ©moire deviennent Ã©normes
- lâ€™OCR reÃ§oit des zones invalides
- le pipeline se retrouve avec des coordonnÃ©es hors limites
- les threads OCR saturent
- lâ€™app finit par crasher (overflow / out-of-memory / segmentation fault)
Câ€™est exactement ce que montrent les logs :
ğŸ” Indice 1 :
PNG IHDR: 2560x1600


â†’ capture incorrecte
ğŸ” Indice 2 :
RÃ©gions scalÃ©es pour 566x420


â†’ zones OCR calculÃ©es pour une petite fenÃªtre
ğŸ” Indice 3 :
Aucun log OCR de cartes, boutons, stacks
â†’ OCR reÃ§oit du bruit
ğŸ” Indice 4 :
Lâ€™app crash aprÃ¨s plusieurs cycles
â†’ surcharge mÃ©moire

ğŸ¯ 3. La cause racine (root cause)
ğŸ‘‰ Le bot ne capture pas la bonne fenÃªtre.
Il devrait capturer :
566x420


Mais il capture :
2560x1600


Donc :
- Le moteur de vision ne voit pas la table
- Le pipeline OCR explose
- Lâ€™app finit par crasher

ğŸ› ï¸ 4. Comment corriger le crash
âœ” Solution 1 â€” Forcer la capture de la fenÃªtre (la vraie)
Dans screenshot-desktop, il faut utiliser :
- windowId
- ou handle
- ou bounds exacts
Actuellement, il capture lâ€™Ã©cran entier, pas la fenÃªtre.

âœ” Solution 2 â€” DÃ©sactiver le â€œresponsive scalingâ€
Ton systÃ¨me de scaling est en train de casser lâ€™OCR.

âœ” Solution 3 â€” Redimensionner automatiquement la fenÃªtre GGClub
Toujours Ã  880Ã—600.

âœ” Solution 4 â€” Installer robotjs natif
Le wrapper simulÃ© peut casser les clics et les captures.

ğŸ§  5. RÃ©sumÃ© final
âœ” Les logs disent :
- Le bot dÃ©marre
- Il dÃ©tecte la table
- Il capture lâ€™Ã©cran entier
- Il applique des zones OCR incorrectes
- Lâ€™OCR tourne dans le vide
- Le pipeline sature
- Lâ€™app crash
âŒ Pourquoi Ã§a crash ?
Parce que la capture dâ€™Ã©cran ne correspond pas Ã  la fenÃªtre, ce qui provoque :
- erreurs de dimensions
- surcharge mÃ©moire
- crash du pipeline OCR

Pipou, si tu veux, je peux :
- analyser la fonction captureScreen()
- te dire exactement comment corriger la capture
- tâ€™Ã©crire le code pour capturer la fenÃªtre GGClub correctement
- tâ€™aider Ã  dÃ©sactiver le scaling
- tâ€™aider Ã  stabiliser lâ€™OCR
Tu veux quâ€™on corrige la capture dâ€™Ã©cran ensemble ?
